<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Rtspproxy-devel] r386 - in trunk/RTSPProxy-Core/src: main/java/rtspproxy/rdt test test/java/rtspproxy test/java/rtspproxy/rdt test/resources test/resources/rtspproxy test/resources/rtspproxy/rdt
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/rtspproxy-devel/2006-January/index.html" >
   <LINK REL="made" HREF="mailto:rtspproxy-devel%40lists.berlios.de?Subject=Re%3A%20%5BRtspproxy-devel%5D%20r386%20-%20in%20trunk/RTSPProxy-Core/src%3A%20main/java/rtspproxy/rdt%20test%20test/java/rtspproxy%20test/java/rtspproxy/rdt%20test/resources%20test/resources/rtspproxy%20test/resources/rtspproxy/rdt&In-Reply-To=%3C200601101848.k0AImtm5029119%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000069.html">
   <LINK REL="Next"  HREF="000071.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Rtspproxy-devel] r386 - in trunk/RTSPProxy-Core/src: main/java/rtspproxy/rdt test test/java/rtspproxy test/java/rtspproxy/rdt test/resources test/resources/rtspproxy test/resources/rtspproxy/rdt</H1>
    <B>rbieniek at berlios.de</B> 
    <A HREF="mailto:rtspproxy-devel%40lists.berlios.de?Subject=Re%3A%20%5BRtspproxy-devel%5D%20r386%20-%20in%20trunk/RTSPProxy-Core/src%3A%20main/java/rtspproxy/rdt%20test%20test/java/rtspproxy%20test/java/rtspproxy/rdt%20test/resources%20test/resources/rtspproxy%20test/resources/rtspproxy/rdt&In-Reply-To=%3C200601101848.k0AImtm5029119%40sheep.berlios.de%3E"
       TITLE="[Rtspproxy-devel] r386 - in trunk/RTSPProxy-Core/src: main/java/rtspproxy/rdt test test/java/rtspproxy test/java/rtspproxy/rdt test/resources test/resources/rtspproxy test/resources/rtspproxy/rdt">rbieniek at berlios.de
       </A><BR>
    <I>Tue Jan 10 19:48:55 CET 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000069.html">[Rtspproxy-devel] r385 - in trunk/RTSPProxy-Core/src/main/java/rtspproxy: rdt rtsp
</A></li>
        <LI>Next message: <A HREF="000071.html">[Rtspproxy-devel] r387 - in trunk/RTSPProxy-Core/src: main/java/rtspproxy main/java/rtspproxy/proxy main/java/rtspproxy/proxy/track main/java/rtspproxy/rdt main/java/rtspproxy/transport main/java/rtspproxy/transport/socket main/java/rtspproxy/transport/socket/nio main/java/rtspproxy/transport/socket/nio/support test/java/rtspproxy/rdt
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70">[ date ]</a>
              <a href="thread.html#70">[ thread ]</a>
              <a href="subject.html#70">[ subject ]</a>
              <a href="author.html#70">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: rbieniek
Date: 2006-01-10 19:48:44 +0100 (Tue, 10 Jan 2006)
New Revision: 386

Added:
   trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/
   trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/BufferUtils.java
   trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/RdtAckPacketTest.java
   trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/RdtDataPacketTest.java
   trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/RdtLatencyRepostPacketTest.java
   trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/RdtRttRequestPacketTest.java
   trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/RdtRttResponsePacketTest.java
   trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/RdtStreamEndPacketTest.java
   trunk/RTSPProxy-Core/src/test/resources/
   trunk/RTSPProxy-Core/src/test/resources/rtspproxy/
   trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/
   trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtAckPacket.txt
   trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtDataPacketStream0.txt
   trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtDataPacketStream1.txt
   trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtLatencyReportWithDataPacket.txt
   trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtRttRequestPacket.txt
   trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtRttResponsePacket.txt
   trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtStreamEndPacketStream0.txt
   trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtStreamEndPacketStream1.txt
Modified:
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtAckPacket.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtDataPacket.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtLatencyReportPacket.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtPacket.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtPacketDecoder.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtRttRequestPacket.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtRttResponsePacket.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtStreamEndPacket.java
Log:
- Fixed RDT packet assembly / disassembly.
- added unit test for all known RDT packet types. All unit tests are passed
  successfully. Check values are taken from network traces.


Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtAckPacket.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtAckPacket.java	2006-01-10 14:58:38 UTC (rev 385)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtAckPacket.java	2006-01-10 18:48:44 UTC (rev 386)
@@ -34,9 +34,10 @@
 
 	@Override
 	protected ByteBuffer buildHeader() {
-		ByteBuffer buf = ByteBuffer.allocate(3, true);
+		ByteBuffer buf = ByteBuffer.allocate(3);
 		byte marker = 0;
-		
+
+		buf.setAutoExpand(true);
 		if(isLengthIncluded())
 			marker |= (1&lt;&lt;7);
 		if(this.lostHigh)
@@ -49,6 +50,7 @@
 			// TODO find a cleaner way.
 			buf.put(encodeShort((short)5));
 		}
+		buf.limit(buf.position());
 		
 		return buf;
 	}

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtDataPacket.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtDataPacket.java	2006-01-10 14:58:38 UTC (rev 385)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtDataPacket.java	2006-01-10 18:48:44 UTC (rev 386)
@@ -142,9 +142,10 @@
 
 	@Override
 	protected ByteBuffer buildHeader() {
-		ByteBuffer buf = ByteBuffer.allocate(8, true);
+		ByteBuffer buf = ByteBuffer.allocate(8);
 		byte marker = 0, control = 0;
 		
+		buf.setAutoExpand(true);
 		if(isLengthIncluded())
 			marker |= (1&lt;&lt;7);
 		if(isNeedReliable())
@@ -154,7 +155,7 @@
 			marker |= (1&lt;&lt;0);		
 		buf.put(marker);		
 
-		buf.put(getType().toByteArray());
+		buf.put(encodeShort(this.sequence));
 
 		if(isLengthIncluded()) {
 			short length = 8;
@@ -177,6 +178,8 @@
 		if(isNeedReliable())
 			buf.put(encodeShort(this.totalReliable));
 		
+		buf.limit(buf.position());
+		
 		return buf;
 	}
 

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtLatencyReportPacket.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtLatencyReportPacket.java	2006-01-10 14:58:38 UTC (rev 385)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtLatencyReportPacket.java	2006-01-10 18:48:44 UTC (rev 386)
@@ -49,11 +49,12 @@
 	
 	@Override
 	protected ByteBuffer buildHeader() {
-		ByteBuffer buf = ByteBuffer.allocate(3, true);
+		ByteBuffer buf = ByteBuffer.allocate(3);
 		byte marker = 0;
 		
+		buf.setAutoExpand(true);
 		if(isLengthIncluded())
-			marker |= (1&lt;&lt;7);
+			marker |= (1&lt;&lt;7) | (1&lt;&lt;1); // bit 1 is needed because it appears in the trace
 		buf.put(marker);
 		buf.put(getType().toByteArray());
 		
@@ -63,6 +64,7 @@
 			buf.put(encodeShort((short)9));
 		}
 		buf.put(encodeInt(this.serverTimeout));
+		buf.limit(buf.position());
 		
 		return buf;
 	}

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtPacket.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtPacket.java	2006-01-10 14:58:38 UTC (rev 385)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtPacket.java	2006-01-10 18:48:44 UTC (rev 386)
@@ -125,15 +125,17 @@
 	 * encode packet as byte buffer
 	 */
 	public ByteBuffer toByteBuffer() {
-		ByteBuffer buf = ByteBuffer.allocate(128, true);
+		ByteBuffer buf = ByteBuffer.allocate(128);
 
-		buf.put(buildHeader());
+		buf.setAutoExpand(true);
+		buf.put(buildHeader().rewind());
 		if(this.payload != null)
 			buf.put(this.payload);
 		if(this.subPacket != null)
 			buf.put(this.subPacket.toByteBuffer());
-
-		return buf;
+		buf.limit(buf.position());
+		
+		return buf.rewind();
 	}
 
 	

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtPacketDecoder.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtPacketDecoder.java	2006-01-10 14:58:38 UTC (rev 385)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtPacketDecoder.java	2006-01-10 18:48:44 UTC (rev 386)
@@ -29,9 +29,10 @@
 	 * @param buffer the byte buffer to decode packet from
 	 */
 	public static RdtPacket decode(ByteBuffer buffer) {
-		byte[] data = new byte[buffer.limit()];
+		byte[] data = new byte[buffer.position()];
 
 		// copy buffer content into temp array
+		buffer.rewind();
 		buffer.get(data);
 
 		return decode(data, 0, 0);
@@ -48,6 +49,7 @@
 		short sequence;
 		boolean lengthIncluded = false;
 		short packetLength = -1;
+		int payloadSize = -1;
 
 		if(depth &gt; 1) {
 			logger.error(&quot;detected packet-decoding recursion overrun, aborting&quot;);
@@ -62,7 +64,7 @@
 		// process sequence / type field
 		seqHi = data[ind++];
 		seqLo = data[ind++];
-		sequence = (short)(seqHi &lt;&lt; 8 | seqLo);
+		sequence = decodeShort(seqHi, seqLo);
 		
 		if(seqHi &lt; 0 ) {
 			logger.debug(&quot;decoding control packet&quot;);
@@ -76,39 +78,53 @@
 			switch(type) {
 			case RttRequest:
 				// process packet length (if included)
-				if(lengthIncluded)
-					packetLength = (short)((data[ind++] &lt;&lt; 8) | data[ind++]);
+				if(lengthIncluded) {
+					packetLength = decodeShort(data, ind);
+					ind += 2;
+				}
 				
 				packet = new RdtRttRequestPacket();
 				break;
 			case RttResponse:
 				// process packet length (if included)
-				if(lengthIncluded)
-					packetLength = (short)((data[ind++] &lt;&lt; 8) | data[ind++]);
+				if(lengthIncluded) {
+					packetLength = decodeShort(data, ind);
+					ind += 2;
+				}
 				
-				int roundtripTimestampSeconds = ((data[ind++] &lt;&lt; 24) | (data[ind++] &lt;&lt; 16) 
-						| (data[ind++] &lt;&lt; 8) | data[ind++]);
-				int roundtripTimestampMicroeconds = ((data[ind++] &lt;&lt; 24) | (data[ind++] &lt;&lt; 16) 
-						| (data[ind++] &lt;&lt; 8) | data[ind++]);
+				int roundtripTimestampSeconds = decodeInt(data, ind);
+				int roundtripTimestampMicroeconds = decodeInt(data, ind+4);
 				
+				ind += 8;
 				packet = new RdtRttResponsePacket(roundtripTimestampSeconds, roundtripTimestampMicroeconds);
+				
+				payloadSize = (lengthIncluded ? packetLength : (data.length - ind));
+				
+				if(payloadSize &gt; 0)
+					ind = attachPayload(packet, data, ind, payloadSize);
+				
 				break;
 			case LatencyReport:
 				// process packet length (if included)
-				if(lengthIncluded)
-					packetLength = (short)((data[ind++] &lt;&lt; 8) | data[ind++]);
+				if(lengthIncluded) {
+					packetLength = decodeShort(data, ind);
+					ind += 2;
+				}
 				
-				int serverTimeout = ((data[ind++] &lt;&lt; 24) | (data[ind++] &lt;&lt; 16) | (data[ind++] &lt;&lt; 8) | data[ind++]);
+				int serverTimeout = decodeInt(data, ind);
 				
+				ind += 4;
 				packet = new RdtLatencyReportPacket(serverTimeout);
 				break;
 			case Ack:
 				// process packet length (if included)
-				if(lengthIncluded)
-					packetLength = (short)((data[ind++] &lt;&lt; 8) | data[ind++]);
+				if(lengthIncluded) {
+					packetLength = decodeShort(data, ind);
+					ind += 2;
+				}
 				
 				boolean lostHigh = ((markerByte &amp; (1&lt;&lt;6)) &gt; 0);
-				int payloadSize = (lengthIncluded ? packetLength : (data.length - ind));
+				payloadSize = (lengthIncluded ? packetLength : (data.length - ind));
 
 				packet = new RdtAckPacket(lostHigh);
 				if(payloadSize &gt; 0)
@@ -119,10 +135,19 @@
 				// in the stream end packet, the length-included serves as need reliable field
 				boolean packetSent = ((markerByte &amp; (1&lt;&lt;1)) &gt; 0);
 				boolean extFlag = ((markerByte &amp; (1&lt;&lt;0)) &gt; 0);
-				short streamEndSequenceNumber = (short)((data[ind++] &lt;&lt; 8) | data[ind++]);
-				int timeout = ((data[ind++] &lt;&lt; 24) | (data[ind++] &lt;&lt; 16) | (data[ind++] &lt;&lt; 8) | data[ind++]);
-				short totalReliable = (short)((data[ind++] &lt;&lt; 8) | data[ind++]);
+				short streamEndSequenceNumber = decodeShort(data, ind);
+				int timeout = decodeInt(data, ind+2);
+				short totalReliable = decodeShort(data, ind+6);
 				
+				ind += 8;
+				
+				// length included servers as need reliable (speical case)
+				packet = new RdtStreamEndPacket(lengthIncluded, streamId, packetSent, extFlag, 
+						streamEndSequenceNumber, timeout, totalReliable);
+				
+				payloadSize = (data.length - ind);
+				if(payloadSize &gt; 0)
+					ind = attachPayload(packet, data, ind, payloadSize);
 				break;
 			}
 		} else {
@@ -130,8 +155,10 @@
 			
 			// data packet
 			// process packet length (if included)
-			if(lengthIncluded)
-				packetLength = (short)((data[ind++] &lt;&lt; 8) | data[ind++]);
+			if(lengthIncluded) {
+				packetLength = decodeShort(data, ind);
+				ind += 2;
+			}
 			
 			// process marker byte
 			boolean needReliable = ((markerByte &amp; (1&lt;&lt;6)) &gt; 0);
@@ -149,7 +176,8 @@
 			// process timestamp
 			if(lengthIncluded)
 				packetLength -= 4;
-			int timestamp = ((data[ind++] &lt;&lt; 24) | (data[ind++] &lt;&lt; 16) | (data[ind++] &lt;&lt; 8) | data[ind++]);
+			int timestamp = decodeInt(data, ind);
+			ind += 4;
 			
 			// process total reliable count
 			if(lengthIncluded)
@@ -158,14 +186,15 @@
 			packet = new RdtDataPacket(needReliable, isReliable, streamId,
 					sequence, backToBack, slowData, asmRule, timestamp);
 			if(needReliable) {
-				short totalReliable = (short)((data[ind++] &lt;&lt; 8) | data[ind++]);
+				short totalReliable = decodeShort(data, ind);
 
+				ind += 2;
 				((RdtDataPacket)packet).setTotalReliable(totalReliable);
-				packetLength -= 2;
+				if(lengthIncluded)
+					packetLength -= 2;
 			}
 
-			int payloadSize = (lengthIncluded ? packetLength : (data.length - ind));
-			
+			payloadSize = (lengthIncluded ? packetLength : (data.length - ind));
 			if(payloadSize &gt; 0)
 				ind = attachPayload(packet, data, ind, payloadSize);
 		}
@@ -194,4 +223,26 @@
 		
 		return (ind + size);
 	}
+	
+	/**
+	 * decode a short from a byte array
+	 */
+	private static final short decodeShort(byte[] bytes, int ind) {
+		return decodeShort(bytes[ind], bytes[ind+1]);
+	}
+
+	private static final short decodeShort(byte hi, byte lo) {
+		return (short)((hi &amp; 0xff) * 256 + (lo &amp; 0xff));
+	}
+	
+	/**
+	 * decode an int 
+	 */
+	private static final int decodeInt(byte[] bytes, int ind) {
+		return decodeInt(bytes[ind], bytes[ind+1], bytes[ind+2], bytes[ind+3]);
+	}
+	
+	private static final int decodeInt(byte b3, byte b2, byte b1, byte b0) {
+		return ((b3 &amp; 0xff) * 16777216) + ((b2 &amp; 0xff) * 65536) + ((b1 &amp; 0xff) * 256) + (b0 &amp; 0xff);
+	}
 }

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtRttRequestPacket.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtRttRequestPacket.java	2006-01-10 14:58:38 UTC (rev 385)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtRttRequestPacket.java	2006-01-10 18:48:44 UTC (rev 386)
@@ -30,11 +30,12 @@
 
 	@Override
 	protected ByteBuffer buildHeader() {
-		ByteBuffer buf = ByteBuffer.allocate(3, true);
+		ByteBuffer buf = ByteBuffer.allocate(3, false);
 		byte marker = 0;
 		
 		buf.put(marker);
 		buf.put(getType().toByteArray());
+		buf.limit(buf.position());
 		
 		return buf;
 	}

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtRttResponsePacket.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtRttResponsePacket.java	2006-01-10 14:58:38 UTC (rev 385)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtRttResponsePacket.java	2006-01-10 18:48:44 UTC (rev 386)
@@ -67,7 +67,7 @@
 
 	@Override
 	protected ByteBuffer buildHeader() {
-		ByteBuffer buf = ByteBuffer.allocate(11, true);
+		ByteBuffer buf = ByteBuffer.allocate(11);
 		byte marker = 0;
 		
 		buf.put(marker);
@@ -75,6 +75,7 @@
 		
 		buf.put(encodeInt(this.roundtripTimestampSeconds));
 		buf.put(encodeInt(this.roundtripTimestampMicroseconds));
+		buf.limit(buf.position());
 		
 		return buf;
 	}

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtStreamEndPacket.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtStreamEndPacket.java	2006-01-10 14:58:38 UTC (rev 385)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/rdt/RdtStreamEndPacket.java	2006-01-10 18:48:44 UTC (rev 386)
@@ -117,7 +117,7 @@
 
 	@Override
 	protected ByteBuffer buildHeader() {
-		ByteBuffer buf = ByteBuffer.allocate(11, true);
+		ByteBuffer buf = ByteBuffer.allocate(11);
 		byte marker = 0;
 		
 		if(isNeedReliable())
@@ -134,6 +134,7 @@
 		buf.put(encodeShort(this.streamEndSequenceNumber));
 		buf.put(encodeInt(this.timestamp));
 		buf.put(encodeShort(this.totalReliable));
+		buf.limit(buf.position());
 		
 		return buf;
 	}

Added: trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/BufferUtils.java
===================================================================
--- trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/BufferUtils.java	2006-01-10 14:58:38 UTC (rev 385)
+++ trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/BufferUtils.java	2006-01-10 18:48:44 UTC (rev 386)
@@ -0,0 +1,100 @@
+/**
+ * 
+ */
+package rtspproxy.rdt;
+
+import java.io.File;
+import java.io.FileInputStream;
+import java.io.IOException;
+import java.io.InputStreamReader;
+import java.io.LineNumberReader;
+
+import org.apache.mina.common.ByteBuffer;
+
+/**
+ * @author Rainer Bieniek (<A HREF="https://lists.berlios.de/mailman/listinfo/rtspproxy-devel">Rainer.Bieniek at vodafone.com</A>)
+ *
+ */
+public class BufferUtils {
+
+	/**
+	 * 
+	 */
+	private BufferUtils() {
+	}
+
+	public static ByteBuffer loadBuffer(String fName) throws IOException {
+		ByteBuffer buffer = ByteBuffer.allocate(16);
+		
+		buffer.setAutoExpand(true);
+
+		File baseDir = new File(System.getProperty(&quot;basedir&quot;));
+		File packetDump = new File(baseDir, 	&quot;src/test/resources/rtspproxy/rdt/&quot; + fName);
+
+		buffer = ByteBuffer.allocate(32); 
+		buffer.setAutoExpand(true);
+		
+		LineNumberReader lnr = new LineNumberReader(new InputStreamReader(
+				new FileInputStream(packetDump)));
+		String line;
+
+		while ((line = lnr.readLine()) != null) {
+			int pos = 0;
+			int nibblePos = 0;
+			byte b = 0;
+
+			for (pos = 0; pos &lt; line.length(); ++pos) {
+				char c = line.charAt(pos);
+				if (!Character.isWhitespace(c)) {
+					byte n = 0;
+
+					if (c &gt;= '0' &amp;&amp; c &lt;= '9') {
+						n = (byte) (c - '0');
+					} else if (c &gt;= 'a' &amp;&amp; c &lt;= 'f') {
+						n = (byte) (c - 'a' + 10);
+					} else if (c &gt;= 'A' &amp;&amp; c &lt;= 'F') {
+						n = (byte) (c - 'A' + 10);
+					} else
+						throw new IllegalArgumentException(
+								&quot;invalid character '&quot; + c + &quot;' in packet dump&quot;);
+					if (nibblePos == 0) {
+						b = (byte)(n &lt;&lt; 4);
+						nibblePos++;
+					} else {
+						b |= n;
+						nibblePos = 0;
+						buffer.put(b);
+					}
+				}
+			}
+		}
+		buffer.limit(buffer.position());
+		
+		return buffer;
+	}
+	
+	/**
+	 * compare two buffers for equality
+	 */
+	public static final boolean buffersEqual(ByteBuffer first, ByteBuffer second) {
+		boolean equal = false;
+		
+		System.out.println(&quot;first limit=&quot; + first.limit() + &quot;, second position=&quot; + second.limit());
+		if(first.limit() == second.limit()) {
+			int i;
+			
+			for(i=0; i&lt;first.limit(); ++i) {
+				if(first.get(i) != second.get(i)) {
+					System.out.println(&quot;index &quot; + i + &quot;: expected=&quot; + Integer.toHexString(first.get(i))
+							+ &quot;: got=&quot; + Integer.toHexString(second.get(i)));
+					break;
+				}
+			}
+
+			if(i == first.limit())
+				equal = true;
+		}
+		
+		return equal;
+	}
+}

Added: trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/RdtAckPacketTest.java
===================================================================
--- trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/RdtAckPacketTest.java	2006-01-10 14:58:38 UTC (rev 385)
+++ trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/RdtAckPacketTest.java	2006-01-10 18:48:44 UTC (rev 386)
@@ -0,0 +1,31 @@
+/**
+ * 
+ */
+package rtspproxy.rdt;
+
+import java.io.IOException;
+
+import org.apache.mina.common.ByteBuffer;
+
+import junit.framework.TestCase;
+
+/**
+ * @author Rainer Bieniek (<A HREF="https://lists.berlios.de/mailman/listinfo/rtspproxy-devel">Rainer.Bieniek at vodafone.com</A>)
+ *
+ */
+public class RdtAckPacketTest extends TestCase {
+
+	public void testRdtAckPacketLoad() throws IOException {
+		RdtAckPacket packet = (RdtAckPacket)RdtPacketDecoder.decode(BufferUtils.loadBuffer(&quot;RdtAckPacket.txt&quot;));
+		
+		assertEquals(packet.isLengthIncluded(), false);
+		assertEquals(packet.isLostHigh(), false);
+	}
+	
+	public void testRdtAckPacketSave() throws IOException {
+		ByteBuffer buffer = BufferUtils.loadBuffer(&quot;RdtAckPacket.txt&quot;);
+		RdtAckPacket packet = (RdtAckPacket)RdtPacketDecoder.decode(BufferUtils.loadBuffer(&quot;RdtAckPacket.txt&quot;));
+		
+		assertTrue(BufferUtils.buffersEqual(buffer, packet.toByteBuffer()));
+	}
+}

Added: trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/RdtDataPacketTest.java
===================================================================
--- trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/RdtDataPacketTest.java	2006-01-10 14:58:38 UTC (rev 385)
+++ trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/RdtDataPacketTest.java	2006-01-10 18:48:44 UTC (rev 386)
@@ -0,0 +1,59 @@
+/**
+ * 
+ */
+package rtspproxy.rdt;
+
+import java.io.IOException;
+
+import junit.framework.TestCase;
+
+import org.apache.mina.common.ByteBuffer;
+
+/**
+ * @author Rainer Bieniek (<A HREF="https://lists.berlios.de/mailman/listinfo/rtspproxy-devel">Rainer.Bieniek at vodafone.com</A>)
+ *
+ */
+public class RdtDataPacketTest extends TestCase {
+
+	public void testRdtPacketStream0Load() throws IOException {
+		RdtDataPacket packet = (RdtDataPacket)RdtPacketDecoder.decode(BufferUtils.loadBuffer(&quot;RdtDataPacketStream0.txt&quot;));
+		
+		assertEquals(packet.isNeedReliable(), true);
+		assertEquals(packet.getStreamId(), 0);
+		assertEquals(packet.isReliable(), false);
+		assertEquals(packet.getSequence(), 1438);
+		assertEquals(packet.isBackToBack(), false);
+		assertEquals(packet.isSlowData(), false);
+		assertEquals(packet.getAsmRule(), 1);
+		assertEquals(packet.getTimestamp(), 23993);
+		assertEquals(packet.getTotalReliable(), 0);
+	}
+	
+	public void testRdtPacketStream0Save() throws IOException {
+		ByteBuffer origBuffer = BufferUtils.loadBuffer(&quot;RdtDataPacketStream0.txt&quot;);
+		RdtDataPacket packet = (RdtDataPacket)RdtPacketDecoder.decode(BufferUtils.loadBuffer(&quot;RdtDataPacketStream0.txt&quot;));
+
+		assertTrue(BufferUtils.buffersEqual(origBuffer, packet.toByteBuffer()));
+	}
+
+	public void testRdtPacketStream1Load() throws IOException {
+		RdtDataPacket packet = (RdtDataPacket)RdtPacketDecoder.decode(BufferUtils.loadBuffer(&quot;RdtDataPacketStream1.txt&quot;));
+		
+		assertEquals(packet.isNeedReliable(), true);
+		assertEquals(packet.getStreamId(), 1);
+		assertEquals(packet.isReliable(), false);
+		assertEquals(packet.getSequence(), 3);
+		assertEquals(packet.isBackToBack(), false);
+		assertEquals(packet.isSlowData(), false);
+		assertEquals(packet.getAsmRule(), 1);
+		assertEquals(packet.getTimestamp(), 348);
+		assertEquals(packet.getTotalReliable(), 0);
+	}
+	
+	public void testRdtPacketStream1Save() throws IOException {
+		ByteBuffer origBuffer = BufferUtils.loadBuffer(&quot;RdtDataPacketStream1.txt&quot;);
+		RdtDataPacket packet = (RdtDataPacket)RdtPacketDecoder.decode(BufferUtils.loadBuffer(&quot;RdtDataPacketStream1.txt&quot;));
+
+		assertTrue(BufferUtils.buffersEqual(origBuffer, packet.toByteBuffer()));
+	}
+}

Added: trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/RdtLatencyRepostPacketTest.java
===================================================================
--- trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/RdtLatencyRepostPacketTest.java	2006-01-10 14:58:38 UTC (rev 385)
+++ trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/RdtLatencyRepostPacketTest.java	2006-01-10 18:48:44 UTC (rev 386)
@@ -0,0 +1,51 @@
+/**
+ * 
+ */
+package rtspproxy.rdt;
+
+
+import java.io.IOException;
+
+import org.apache.mina.common.ByteBuffer;
+
+import junit.framework.TestCase;
+
+/**
+ * @author Rainer Bieniek (<A HREF="https://lists.berlios.de/mailman/listinfo/rtspproxy-devel">Rainer.Bieniek at vodafone.com</A>)
+ *
+ */
+public class RdtLatencyRepostPacketTest extends TestCase {
+
+	public void testRdtLatencyReportPacketLoad() throws IOException {
+		RdtLatencyReportPacket packet = (RdtLatencyReportPacket)RdtPacketDecoder.decode(BufferUtils.loadBuffer(&quot;RdtLatencyReportWithDataPacket.txt&quot;));
+		
+		assertEquals(packet.isLengthIncluded(), true);
+		assertEquals(packet.getServerTimeout(), 0);
+	}
+
+	public void testRdtLatencyReportPacketDataLoad() throws IOException {
+		RdtLatencyReportPacket packet = (RdtLatencyReportPacket)RdtPacketDecoder.decode(BufferUtils.loadBuffer(&quot;RdtLatencyReportWithDataPacket.txt&quot;));
+		
+		assertEquals(packet.isLengthIncluded(), true);
+		assertEquals(packet.getServerTimeout(), 0);
+		
+		RdtDataPacket subPacket = (RdtDataPacket)packet.getSubPacket();
+		
+		assertEquals(subPacket.isLengthIncluded(), false);
+		assertEquals(subPacket.isNeedReliable(), true);
+		assertEquals(subPacket.getStreamId(), 0);
+		assertEquals(subPacket.getSequence(), 0);
+		assertEquals(subPacket.isBackToBack(), false);
+		assertEquals(subPacket.isSlowData(), false);
+		assertEquals(subPacket.getAsmRule(), 0);
+		assertEquals(subPacket.getTimestamp(), 0);
+		assertEquals(subPacket.getTotalReliable(), 0);
+	}
+
+	public void testRdtLatencyReportPacketSave() throws IOException {
+		ByteBuffer buffer = BufferUtils.loadBuffer(&quot;RdtLatencyReportWithDataPacket.txt&quot;);
+		RdtLatencyReportPacket packet = (RdtLatencyReportPacket)RdtPacketDecoder.decode(BufferUtils.loadBuffer(&quot;RdtLatencyReportWithDataPacket.txt&quot;));
+		
+		assertTrue(BufferUtils.buffersEqual(buffer, packet.toByteBuffer()));
+	}
+}

Added: trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/RdtRttRequestPacketTest.java
===================================================================
--- trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/RdtRttRequestPacketTest.java	2006-01-10 14:58:38 UTC (rev 385)
+++ trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/RdtRttRequestPacketTest.java	2006-01-10 18:48:44 UTC (rev 386)
@@ -0,0 +1,32 @@
+/**
+ * 
+ */
+package rtspproxy.rdt;
+
+import java.io.IOException;
+
+import org.apache.mina.common.ByteBuffer;
+
+import junit.framework.TestCase;
+
+/**
+ * @author Rainer Bieniek (<A HREF="https://lists.berlios.de/mailman/listinfo/rtspproxy-devel">Rainer.Bieniek at vodafone.com</A>)
+ *
+ */
+public class RdtRttRequestPacketTest extends TestCase {
+
+	public void testRdtRttRequestPacketLoad() throws IOException {
+		RdtRttRequestPacket packet = 
+			(RdtRttRequestPacket)RdtPacketDecoder.decode(BufferUtils.loadBuffer(&quot;RdtRttRequestPacket.txt&quot;));
+		
+		assertEquals(packet.isLengthIncluded(), false);
+	}
+
+	public void testRdtRttRequestPacketSave() throws IOException {
+		ByteBuffer buffer = BufferUtils.loadBuffer(&quot;RdtRttRequestPacket.txt&quot;);
+		RdtRttRequestPacket packet = 
+			(RdtRttRequestPacket)RdtPacketDecoder.decode(BufferUtils.loadBuffer(&quot;RdtRttRequestPacket.txt&quot;));
+		
+		assertTrue(BufferUtils.buffersEqual(buffer, packet.toByteBuffer()));
+	}
+}

Added: trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/RdtRttResponsePacketTest.java
===================================================================
--- trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/RdtRttResponsePacketTest.java	2006-01-10 14:58:38 UTC (rev 385)
+++ trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/RdtRttResponsePacketTest.java	2006-01-10 18:48:44 UTC (rev 386)
@@ -0,0 +1,34 @@
+/**
+ * 
+ */
+package rtspproxy.rdt;
+
+import java.io.IOException;
+
+import org.apache.mina.common.ByteBuffer;
+
+import junit.framework.TestCase;
+
+/**
+ * @author Rainer Bieniek (<A HREF="https://lists.berlios.de/mailman/listinfo/rtspproxy-devel">Rainer.Bieniek at vodafone.com</A>)
+ *
+ */
+public class RdtRttResponsePacketTest extends TestCase {
+
+
+	public void testRdtRttResponsePacketLoad() throws IOException {
+		RdtRttResponsePacket packet = (RdtRttResponsePacket)RdtPacketDecoder.decode(BufferUtils.loadBuffer(&quot;RdtRttResponsePacket.txt&quot;));
+
+		assertEquals(packet.isLengthIncluded(), false);
+		assertEquals(packet.getRoundtripTimestampSeconds(), 1136818556);
+		assertEquals(packet.getRoundtripTimestampMicroseconds(), 101211);
+	}
+	
+	public void testRdtRttResponsePacketSave() throws IOException {
+		ByteBuffer buffer = BufferUtils.loadBuffer(&quot;RdtRttResponsePacket.txt&quot;);
+		RdtRttResponsePacket packet = (RdtRttResponsePacket)RdtPacketDecoder.decode(BufferUtils.loadBuffer(&quot;RdtRttResponsePacket.txt&quot;));
+		
+		assertTrue(BufferUtils.buffersEqual(buffer, packet.toByteBuffer()));
+	}
+
+}

Added: trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/RdtStreamEndPacketTest.java
===================================================================
--- trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/RdtStreamEndPacketTest.java	2006-01-10 14:58:38 UTC (rev 385)
+++ trunk/RTSPProxy-Core/src/test/java/rtspproxy/rdt/RdtStreamEndPacketTest.java	2006-01-10 18:48:44 UTC (rev 386)
@@ -0,0 +1,56 @@
+/**
+ * 
+ */
+package rtspproxy.rdt;
+
+import java.io.IOException;
+
+import org.apache.mina.common.ByteBuffer;
+
+import junit.framework.TestCase;
+
+/**
+ * @author Rainer Bieniek (<A HREF="https://lists.berlios.de/mailman/listinfo/rtspproxy-devel">Rainer.Bieniek at vodafone.com</A>)
+ *
+ */
+public class RdtStreamEndPacketTest extends TestCase {
+
+		public void testRdtStreamEndPacketStream0Load() throws IOException {
+			RdtStreamEndPacket packet = (RdtStreamEndPacket)RdtPacketDecoder.decode(BufferUtils.loadBuffer(&quot;RdtStreamEndPacketStream0.txt&quot;));
+			
+			assertEquals(packet.isNeedReliable(), true);
+			assertEquals(packet.getStreamId(), 0);
+			assertEquals(packet.isPacketSent(), true);
+			assertEquals(packet.isExtFlag(), false);
+			assertEquals(packet.getStreamEndSequenceNumber(), 1423);
+			assertEquals(packet.getTimestamp(), 23726);
+			assertEquals(packet.getTotalReliable(), 0);
+		}
+		
+		public void testRdtStreamEndPacketStream0Save() throws IOException {
+			ByteBuffer buffer = BufferUtils.loadBuffer(&quot;RdtStreamEndPacketStream0.txt&quot;);
+			RdtStreamEndPacket packet = (RdtStreamEndPacket)RdtPacketDecoder.decode(BufferUtils.loadBuffer(&quot;RdtStreamEndPacketStream0.txt&quot;));
+	
+			assertTrue(BufferUtils.buffersEqual(buffer, packet.toByteBuffer()));
+		}
+
+
+		public void testRdtStreamEndPacketStream1Load() throws IOException {
+			RdtStreamEndPacket packet = (RdtStreamEndPacket)RdtPacketDecoder.decode(BufferUtils.loadBuffer(&quot;RdtStreamEndPacketStream1.txt&quot;));
+			
+			assertEquals(packet.isNeedReliable(), true);
+			assertEquals(packet.getStreamId(), 1);
+			assertEquals(packet.isPacketSent(), true);
+			assertEquals(packet.isExtFlag(), false);
+			assertEquals(packet.getStreamEndSequenceNumber(), 271);
+			assertEquals(packet.getTimestamp(), 31462);
+			assertEquals(packet.getTotalReliable(), 0);
+		}
+		
+		public void testRdtStreamEndPacketStream1Save() throws IOException {
+			ByteBuffer buffer = BufferUtils.loadBuffer(&quot;RdtStreamEndPacketStream1.txt&quot;);
+			RdtStreamEndPacket packet = (RdtStreamEndPacket)RdtPacketDecoder.decode(BufferUtils.loadBuffer(&quot;RdtStreamEndPacketStream1.txt&quot;));
+	
+			assertTrue(BufferUtils.buffersEqual(buffer, packet.toByteBuffer()));
+		}
+}

Added: trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtAckPacket.txt
===================================================================
--- trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtAckPacket.txt	2006-01-10 14:58:38 UTC (rev 385)
+++ trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtAckPacket.txt	2006-01-10 18:48:44 UTC (rev 386)
@@ -0,0 +1,6 @@
+00 ff 02 00 00 00
+ef 00 ef 20 ff ff ff ff ff ff ff ff ff ff ff ff
+ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff
+ff 7f 00 00 00 01 00 21 00 21 20 ff ff ff ff 01
+00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
+00 00 00 00 00 00 00 00 00 00 00

Added: trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtDataPacketStream0.txt
===================================================================
--- trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtDataPacketStream0.txt	2006-01-10 14:58:38 UTC (rev 385)
+++ trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtDataPacketStream0.txt	2006-01-10 18:48:44 UTC (rev 386)
@@ -0,0 +1,5 @@
+40 05 9e 01 00 00
+5d b9 00 00 01 01 40 80 40 00 b8 7a 17 65 60 0e
+4b 1d e3 de f7 24 7d e7 de f7 91 cc 1e f7 bc 8e
+db de f7 bd ef 23 ef 7b dd bd ef 7b c2 fb de ed
+cb b7 bd b9 0f 7b de f7 bd ef 78

Added: trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtDataPacketStream1.txt
===================================================================
--- trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtDataPacketStream1.txt	2006-01-10 14:58:38 UTC (rev 385)
+++ trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtDataPacketStream1.txt	2006-01-10 18:48:44 UTC (rev 386)
@@ -0,0 +1,42 @@
+42 00 03 01 00 00
+01 5c 00 00 77 c5 1a d5 6c 64 a0 2a ea a8 d1 9c
+cc 29 3b 08 9c a1 d9 cd 3a d7 95 7b a8 c8 03 76
+be 50 f0 ee 1d 35 9f e0 db 12 43 88 f1 83 23 de
+5c d1 93 8f a0 29 b7 94 d1 b0 62 97 9d 3f 62 b2
+86 29 1b 59 27 f0 41 91 46 20 9b 8c 79 75 14 83
+59 2d 0f e4 f7 10 7d fd 18 d2 75 3c a5 eb 67 31
+a9 e7 c6 90 03 b3 c3 03 0c 32 98 e5 a4 7d 08 dc
+68 af bb 13 86 29 01 1a c4 6b e0 83 fb dd 0e 87
+d7 7c a1 f2 77 c5 00 59 6c a9 58 e6 26 de 9d fa
+f1 f4 be 0b 32 21 f9 23 ea 0e d3 56 6e 04 0b c9
+8e bd 45 79 0f fe ce 89 bc 40 04 b5 4c 2a 60 82
+95 6d c6 ab 43 9c 67 9b bb 2b dd 37 71 3a 11 4c
+ee 22 2d 48 8e d9 58 82 84 1e 60 c0 1c 30 31 b3
+f7 0d fc a1 96 84 3f e3 f0 db dd 55 ed fd f3 60
+b2 dc ac 84 41 b6 ce 96 cd b5 3b e9 c4 23 12 92
+f9 5a bb b8 7b 44 dc 87 73 4c 25 10 84 70 1c 45
+95 4e fd b2 77 c5 00 d2 83 43 b0 e2 34 91 72 d1
+15 49 28 0d d6 bb db a1 56 1a 6a c6 5e 98 85 2a
+40 1b dc e8 60 ae be ec 83 60 3d 8f e3 2b ad 88
+e5 51 a0 05 64 41 f0 fd c7 93 47 d2 38 62 33 87
+e7 37 65 54 0a cb 5b 58 d5 50 2d 83 b4 70 51 24
+ed 72 6b 48 57 da 88 a9 89 a0 63 1e f5 6b 81 b0
+6b 7d 01 8a c2 ef 25 fb df 7a f8 d7 d7 46 5b b2
+56 3d 25 75 a1 25 bf 8b 5a 93 03 86 d4 02 77 c5
+24 33 51 f2 77 c5 00 d2 96 50 80 26 03 cf 29 c5
+2e dd 3e 0d 23 b2 82 1e 50 f3 4c 45 c3 de b8 2f
+68 2c bd 95 01 98 a6 06 2c 6c cc ad de 6e 70 33
+b2 a7 2e f7 7d 1d 61 93 6f 4a d0 a1 7e 7c e4 17
+55 7f 40 e3 40 1c b9 9f 27 23 e6 5e 2a 35 ce 82
+b1 ee 21 21 da 7c d3 e7 80 02 fd fa 39 52 97 0e
+eb dc 91 2e 6d 74 03 2c 18 4e eb 27 31 d7 5f 1a
+64 b4 8d 60 6b 3c 91 fd 26 52 85 eb 6d 2e 2b 4b
+ad c6 59 f2 77 c5 01 56 81 5d 64 b7 36 c1 50 c0
+8f 4d 3e 0d 27 9b 5a 88 00 9a c3 43 40 cc c9 54
+c4 1f 6b de 0d d6 94 8a ce 4b 74 e8 bf 98 b8 ed
+06 09 b2 a3 3c 70 02 71 c6 25 01 6a 92 fe 6c 3a
+02 7c 22 bd c4 6e e5 8b 4e 26 8d 69 3a 7c 79 25
+0d 77 21 ed b7 31 e8 29 30 a6 f4 85 43 7c a6 c4
+da ba 98 4c a1 17 a8 94 25 5e 64 24 03 a3 9d af
+2d be c7 5a 22 aa c8 96 32 11 ed cb 50 e7 2b f6
+2b cc 06 52
\ No newline at end of file

Added: trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtLatencyReportWithDataPacket.txt
===================================================================
--- trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtLatencyReportWithDataPacket.txt	2006-01-10 14:58:38 UTC (rev 385)
+++ trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtLatencyReportWithDataPacket.txt	2006-01-10 18:48:44 UTC (rev 386)
@@ -0,0 +1,9 @@
+82 ff 08 00 09 00
+00 00 00 40 00 00 00 00 00 00 00 00 00 01 01 40
+dd 40 00 00 14 20 00 1b 00 46 db ff f1 18 42 10
+84 21 08 42 10 84 21 08 42 10 84 21 11 84 21 08
+42 10 84 21 08 42 11 18 42 14 84 22 38 e4 21 08
+42 10 84 21 0c 63 9c e4 21 08 63 1c c6 32 30 c6
+39 08 44 71 08 63 98 84 46 10 88 e2 18 c4 22 30
+85 21 08 42 10 84 21 08 52 10 88 42 90 84 21 08
+44 fc e4 21 08 44 31 08 87 31 00
\ No newline at end of file

Added: trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtRttRequestPacket.txt
===================================================================
--- trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtRttRequestPacket.txt	2006-01-10 14:58:38 UTC (rev 385)
+++ trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtRttRequestPacket.txt	2006-01-10 18:48:44 UTC (rev 386)
@@ -0,0 +1 @@
+00 ff 03
\ No newline at end of file

Added: trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtRttResponsePacket.txt
===================================================================
--- trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtRttResponsePacket.txt	2006-01-10 14:58:38 UTC (rev 385)
+++ trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtRttResponsePacket.txt	2006-01-10 18:48:44 UTC (rev 386)
@@ -0,0 +1,2 @@
+00 ff 04 43 c2 79
+7c 00 01 8b 5b 00 00 00 00 00 00 00
\ No newline at end of file

Added: trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtStreamEndPacketStream0.txt
===================================================================
--- trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtStreamEndPacketStream0.txt	2006-01-10 14:58:38 UTC (rev 385)
+++ trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtStreamEndPacketStream0.txt	2006-01-10 18:48:44 UTC (rev 386)
@@ -0,0 +1,2 @@
+82 ff 06 05 8f 00
+00 5c ae 00 00 00 00 00 00 00 00 00

Added: trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtStreamEndPacketStream1.txt
===================================================================
--- trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtStreamEndPacketStream1.txt	2006-01-10 14:58:38 UTC (rev 385)
+++ trunk/RTSPProxy-Core/src/test/resources/rtspproxy/rdt/RdtStreamEndPacketStream1.txt	2006-01-10 18:48:44 UTC (rev 386)
@@ -0,0 +1,2 @@
+86 ff 06 01 0f 00
+00 7a e6 00 00 00 00 00 00 00 00 00
\ No newline at end of file


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000069.html">[Rtspproxy-devel] r385 - in trunk/RTSPProxy-Core/src/main/java/rtspproxy: rdt rtsp
</A></li>
	<LI>Next message: <A HREF="000071.html">[Rtspproxy-devel] r387 - in trunk/RTSPProxy-Core/src: main/java/rtspproxy main/java/rtspproxy/proxy main/java/rtspproxy/proxy/track main/java/rtspproxy/rdt main/java/rtspproxy/transport main/java/rtspproxy/transport/socket main/java/rtspproxy/transport/socket/nio main/java/rtspproxy/transport/socket/nio/support test/java/rtspproxy/rdt
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#70">[ date ]</a>
              <a href="thread.html#70">[ thread ]</a>
              <a href="subject.html#70">[ subject ]</a>
              <a href="author.html#70">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/rtspproxy-devel">More information about the Rtspproxy-devel
mailing list</a><br>
</body></html>
