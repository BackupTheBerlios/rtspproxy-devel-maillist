<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Rtspproxy-devel] r374 - in trunk/RTSPProxy-Core/src: main/java/rtspproxy main/java/rtspproxy/config main/java/rtspproxy/filter/accounting main/java/rtspproxy/filter/authentication main/java/rtspproxy/filter/authentication/scheme main/java/rtspproxy/filter/ipaddress main/java/rtspproxy/filter/rewrite main/java/rtspproxy/jmx main/java/rtspproxy/lib main/java/rtspproxy/proxy main/java/rtspproxy/proxy/track main/java/rtspproxy/rtp main/java/rtspproxy/rtp/rtcp main/java/rtspproxy/rtsp resources/conf
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/rtspproxy-devel/2006-January/index.html" >
   <LINK REL="made" HREF="mailto:rtspproxy-devel%40lists.berlios.de?Subject=Re%3A%20%5BRtspproxy-devel%5D%20r374%20-%20in%20trunk/RTSPProxy-Core/src%3A%20main/java/rtspproxy%20main/java/rtspproxy/config%20main/java/rtspproxy/filter/accounting%20main/java/rtspproxy/filter/authentication%20main/java/rtspproxy/filter/authentication/scheme%20main/java/rtspproxy/filter/ipaddress%20main/java/rtspproxy/filter/rewrite%20main/java/rtspproxy/jmx%20main/java/rtspproxy/lib%20main/java/rtspproxy/proxy%20main/java/rtspproxy/proxy/track%20main/java/rtspproxy/rtp%20main/java/rtspproxy/rtp/rtcp%20main/java/rtspproxy/rtsp%20resources/conf&In-Reply-To=%3C200601051830.k05IUist023915%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000058.html">
   <LINK REL="Next"  HREF="000059.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Rtspproxy-devel] r374 - in trunk/RTSPProxy-Core/src: main/java/rtspproxy main/java/rtspproxy/config main/java/rtspproxy/filter/accounting main/java/rtspproxy/filter/authentication main/java/rtspproxy/filter/authentication/scheme main/java/rtspproxy/filter/ipaddress main/java/rtspproxy/filter/rewrite main/java/rtspproxy/jmx main/java/rtspproxy/lib main/java/rtspproxy/proxy main/java/rtspproxy/proxy/track main/java/rtspproxy/rtp main/java/rtspproxy/rtp/rtcp main/java/rtspproxy/rtsp resources/conf</H1>
    <B>rbieniek at berlios.de</B> 
    <A HREF="mailto:rtspproxy-devel%40lists.berlios.de?Subject=Re%3A%20%5BRtspproxy-devel%5D%20r374%20-%20in%20trunk/RTSPProxy-Core/src%3A%20main/java/rtspproxy%20main/java/rtspproxy/config%20main/java/rtspproxy/filter/accounting%20main/java/rtspproxy/filter/authentication%20main/java/rtspproxy/filter/authentication/scheme%20main/java/rtspproxy/filter/ipaddress%20main/java/rtspproxy/filter/rewrite%20main/java/rtspproxy/jmx%20main/java/rtspproxy/lib%20main/java/rtspproxy/proxy%20main/java/rtspproxy/proxy/track%20main/java/rtspproxy/rtp%20main/java/rtspproxy/rtp/rtcp%20main/java/rtspproxy/rtsp%20resources/conf&In-Reply-To=%3C200601051830.k05IUist023915%40sheep.berlios.de%3E"
       TITLE="[Rtspproxy-devel] r374 - in trunk/RTSPProxy-Core/src: main/java/rtspproxy main/java/rtspproxy/config main/java/rtspproxy/filter/accounting main/java/rtspproxy/filter/authentication main/java/rtspproxy/filter/authentication/scheme main/java/rtspproxy/filter/ipaddress main/java/rtspproxy/filter/rewrite main/java/rtspproxy/jmx main/java/rtspproxy/lib main/java/rtspproxy/proxy main/java/rtspproxy/proxy/track main/java/rtspproxy/rtp main/java/rtspproxy/rtp/rtcp main/java/rtspproxy/rtsp resources/conf">rbieniek at berlios.de
       </A><BR>
    <I>Thu Jan  5 19:30:44 CET 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000058.html">[Rtspproxy-devel] r373 - in trunk: . RTSPProxy-Core RTSPProxy-OSGi RTSPProxy-OSGi/src RTSPProxy-OSGi/src/changes RTSPProxy-OSGi/src/main RTSPProxy-OSGi/src/test src/changes
</A></li>
        <LI>Next message: <A HREF="000059.html">[Rtspproxy-devel] r375 - in trunk: . RTSPProxy-App RTSPProxy-App/src RTSPProxy-App/src/changes RTSPProxy-App/src/main RTSPProxy-App/src/main/java RTSPProxy-App/src/main/java/rtspproxy RTSPProxy-App/src/main/java/rtspproxy/filter RTSPProxy-App/src/main/java/rtspproxy/filter/accounting RTSPProxy-App/src/main/java/rtspproxy/filter/accounting/accounting RTSPProxy-App/src/main/java/rtspproxy/filter/authentication RTSPProxy-App/src/main/java/rtspproxy/filter/ipaddress RTSPProxy-App/src/main/java/rtspproxy/filter/ipaddress/ipaddress RTSPProxy-App/src/resources RTSPProxy-App/src/resources/conf RTSPProxy-App/src/test RTSPProxy-App/src/test/java RTSPProxy-App/src/test/java/rtspproxy RTSPProxy-App/src/test/java/rtspproxy/filter RTSPProxy-App/src/test/java/rtspproxy/filter/ipaddress RTSPProxy-Core RTSPProxy-Core/src/main/java/rtspproxy RTSPProxy-Core/src/main/java/rtspproxy/filter RTSPProxy-Core/src/main/java/rtspproxy/filter/authentication RTSPProxy-Core/src/resources RTSPProxy-Core/src/resourc! es/conf RTSPProxy-Core/src/test/java/rtspproxy/filter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60">[ date ]</a>
              <a href="thread.html#60">[ thread ]</a>
              <a href="subject.html#60">[ subject ]</a>
              <a href="author.html#60">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: rbieniek
Date: 2006-01-05 19:29:14 +0100 (Thu, 05 Jan 2006)
New Revision: 374

Added:
   trunk/RTSPProxy-Core/src/resources/conf/rtspproxy.log4j.xml
Removed:
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/config/ConfigReader.java
Modified:
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/Main.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/ProxyService.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/ProxyServiceRegistry.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/Reactor.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/RtspService.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/ShutdownHandler.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/config/Config.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/config/XMLConfigReader.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/filter/accounting/AccountingFilter.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/filter/authentication/AuthenticationFilter.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/filter/authentication/scheme/BasicAuthentication.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/filter/authentication/scheme/DigestAuthentication.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/filter/ipaddress/IpAddressFilter.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/filter/rewrite/RequestUrlRewritingImpl.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/jmx/Authenticator.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/jmx/JmxAgent.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/lib/Exceptions.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/lib/NetworkInterface.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/lib/PortManager.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ClientRdtPacketHandler.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ClientRtcpPacketHandler.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ClientRtpPacketHandler.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ClientSide.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ProxyHandler.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ProxySession.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ServerRdtPacketHandler.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ServerRtcpPacketHandler.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ServerRtpPacketHandler.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ServerSide.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/track/RdtTrack.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/track/RtpTrack.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/rtp/RtpPacket.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/rtp/rtcp/SDESInfo.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/rtsp/RtspDecoder.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/rtsp/RtspResponse.java
   trunk/RTSPProxy-Core/src/main/java/rtspproxy/rtsp/RtspSession.java
   trunk/RTSPProxy-Core/src/resources/conf/rtspproxy.conf.xml
Log:
- Removed property-file based configuration mechanism
- Factored configuration out of the main reactor. The caller must
  have loaded the configuration before starting the reactor.
- switched the core classes from log4j to slf4j logging. This allows
  a flexible logging framework configuration.
- The log4j configuration is now based on a configuration file (either
  properties or xml) which is pulled in by the main class.

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/Main.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/Main.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/Main.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -17,9 +17,16 @@
  */
 package rtspproxy;
 
+import java.io.File;
+import java.util.ArrayList;
+
 import org.apache.log4j.BasicConfigurator;
 import org.apache.log4j.Logger;
+import org.apache.log4j.PropertyConfigurator;
+import org.apache.log4j.xml.DOMConfigurator;
 
+import rtspproxy.config.Config;
+import rtspproxy.config.XMLConfigReader;
 import rtspproxy.lib.Exceptions;
 
 /**
@@ -40,6 +47,68 @@
 		Runtime.getRuntime().addShutdownHook( new ShutdownHandler() );
 
 		try {
+			// Read configuration files
+			new Config();
+
+			// Log4J configuration
+			ArrayList&lt;String&gt; log4jList = new ArrayList&lt;String&gt;();
+			
+			// system wide configuration (typical on un*x-like systems)
+			log4jList.add(&quot;/etc/rtspproxy.log4j.&quot;);
+			
+			// Per-user configuration
+			log4jList.add(System.getProperty( &quot;user.home&quot;, &quot;&quot; ) + &quot;/.rtspproxy.log4j.&quot;);
+
+			// RtspProxy home folder
+			if(Config.getHome() != null)
+				log4jList.add(Config.getHome() + &quot;/rtspproxy.log4j.&quot;);
+
+			// Current directory configuration
+			log4jList.add(&quot;rtspproxy.log4j.&quot;);
+
+			// Used for testing purposes:
+			// checks for the configuration file
+			log4jList.add(&quot;src/resources/conf/rtspproxy.log4j.&quot;);
+
+			for(String path : log4jList) {
+				File propFile = new File(path + &quot;properties&quot;);
+				File xmlFile = new File(path + &quot;xml&quot;);
+				
+				if(propFile.canRead())
+					PropertyConfigurator.configure(propFile.toURL());
+				else if(xmlFile.canRead())
+					DOMConfigurator.configure(xmlFile.toURL());
+			}
+			
+			ArrayList&lt;String&gt; pathlist = new ArrayList&lt;String&gt;();
+
+			// System wide configuration (tipical in unix systems)
+			pathlist.add(&quot;/etc/rtspproxy.conf.xml&quot;);
+			
+			// Per user config
+			pathlist.add(System.getProperty( &quot;user.home&quot;, &quot;&quot; ) + &quot;/.rtspproxy.conf.xml&quot;);
+
+			// RtspProxy home folder
+			if(Config.getHome() != null)
+				pathlist.add(Config.getHome() + &quot;/rtspproxy.conf.xml&quot;);
+
+			// Current directory configuration
+			pathlist.add(&quot;rtspproxy.conf.xml&quot;);
+
+			// Used for testing purposes:
+			// checks for the configuration file
+			pathlist.add(&quot;src/resources/conf/rtspproxy.conf.xml&quot;);
+
+			XMLConfigReader configReader = new XMLConfigReader();
+			
+			for ( String path : pathlist ) {
+				configReader.readConfig(path);
+			}
+
+			if ( log.isDebugEnabled() ) {
+				log.debug( Config.debugParameters() );
+			}
+			
 			Reactor.setStandalone( true );
 			Reactor.start();
 

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/ProxyService.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/ProxyService.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/ProxyService.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -26,7 +26,8 @@
 import java.util.Observer;
 import java.util.Set;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 import org.apache.mina.common.IoFilterChainBuilder;
 import org.apache.mina.common.IoHandler;
 import org.apache.mina.common.IoSession;
@@ -46,7 +47,7 @@
 public abstract class ProxyService extends Singleton implements Observer
 {
 
-	private static Logger log = Logger.getLogger( ProxyService.class );
+	private static Logger log = LoggerFactory.getLogger( ProxyService.class );
 
 	/**
 	 * Main Socket address used by the service. It can be bound on several
@@ -101,7 +102,7 @@
 			log.info( getName() + &quot; Started - Listening on: &quot; + socketAddress );
 
 		} catch ( IOException e ) {
-			log.fatal( &quot;Can't start &quot; + getName() + &quot; &quot; + e );
+			log.error( &quot;Can't start &quot; + getName() + &quot; &quot; + e );
 			throw e;
 		}
 

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/ProxyServiceRegistry.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/ProxyServiceRegistry.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/ProxyServiceRegistry.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -28,7 +28,8 @@
 import java.util.concurrent.ConcurrentHashMap;
 import java.util.concurrent.ConcurrentMap;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 import org.apache.mina.common.IoAcceptor;
 import org.apache.mina.common.IoFilter;
 import org.apache.mina.common.IoFilterChain;
@@ -52,7 +53,7 @@
 public final class ProxyServiceRegistry extends Singleton implements Observer
 {
 
-	private static Logger log = Logger.getLogger( ProxyServiceRegistry.class );
+	private static Logger log = LoggerFactory.getLogger( ProxyServiceRegistry.class );
 
 	public static final String threadPoolFilterNAME = &quot;threadPoolFilter&quot;;
 

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/Reactor.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/Reactor.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/Reactor.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -18,20 +18,22 @@
 
 package rtspproxy;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 
 import rtspproxy.config.Config;
-import rtspproxy.config.ConfigReader;
 import rtspproxy.jmx.JmxAgent;
 import rtspproxy.lib.Exceptions;
 
 /**
- * 
+ * Main reactor of RTSP proxy. This reactor assembles all required services.
+ * The reactor expects a valid configuration before startup eg the global configuration must
+ * have been filled before starting the reactor.
  */
 public class Reactor
 {
 
-	private static Logger log = Logger.getLogger( Reactor.class );
+	private static Logger log = LoggerFactory.getLogger( Reactor.class );
 
 	private static ProxyServiceRegistry registry = null;
 
@@ -46,37 +48,12 @@
 
 	/**
 	 * Constructor. Creates a new Reactor and starts it.
+	 * The reactor relies on configuration info that has to be provided 
+	 * &lt;b&gt;before&lt;/b&gt; starting the reactor.
+	 * @exception Exception reactor startup failed.
 	 */
 	static public void start() throws Exception
 	{
-		// Read configuration files
-		new Config();
-
-		String[] paths = new String[5];
-
-		// Used for testing purposes:
-		// checks for the configuration file
-		paths[4] = &quot;src/resources/conf/rtspproxy.properties&quot;;
-
-		// Current directory configuration
-		paths[3] = &quot;rtspproxy.properties&quot;;
-
-		// RtspProxy home folder
-		paths[2] = Config.getHome() + &quot;/conf/rtspproxy.properties&quot;;
-
-		// Per user config
-		paths[1] = System.getProperty( &quot;user.home&quot;, &quot;&quot; ) + &quot;/.rtspproxy.properties&quot;;
-		// System wide configuration (tipical in unix systems)
-		paths[0] = &quot;/etc/rtspproxy.properties&quot;;
-
-		for ( String path : paths ) {
-			new ConfigReader( path );
-		}
-
-		if ( log.isDebugEnabled() ) {
-			log.debug( Config.debugParameters() );
-		}
-
 		log.info( &quot;Starting &quot; + Config.getName() + &quot; &quot; + Config.getVersion() );
 
 		registry = new ProxyServiceRegistry();

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/RtspService.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/RtspService.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/RtspService.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -20,7 +20,8 @@
 
 import java.util.Observable;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 import org.apache.mina.common.IoAcceptor;
 import org.apache.mina.common.IoFilterChainBuilder;
 import org.apache.mina.common.IoHandler;
@@ -39,7 +40,7 @@
 public final class RtspService extends ProxyService
 {
 
-	private static Logger log = Logger.getLogger( RtspService.class );
+	private static Logger log = LoggerFactory.getLogger( RtspService.class );
 
 	private IoHandler rtspHandler = new ClientSide();
 

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/ShutdownHandler.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/ShutdownHandler.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/ShutdownHandler.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -18,7 +18,8 @@
 
 package rtspproxy;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 
 import rtspproxy.config.Config;
 import rtspproxy.lib.Exceptions;
@@ -31,7 +32,7 @@
 public class ShutdownHandler extends Thread
 {
 
-	private static Logger log = Logger.getLogger( ShutdownHandler.class );
+	private static Logger log = LoggerFactory.getLogger( ShutdownHandler.class );
 
 	public void run()
 	{
@@ -41,7 +42,7 @@
 			Reactor.stop();
 
 		} catch ( Exception e ) {
-			log.fatal( &quot;Exception in the reactor: &quot; + e );
+			log.error( &quot;Exception in the reactor: &quot; + e );
 			Exceptions.logStackTrace( e );
 		}
 	}

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/config/Config.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/config/Config.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/config/Config.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -46,30 +46,7 @@
 	{
 		return parameters;
 	}
-
-	public static final BooleanParameter logDebug = new BooleanParameter( &quot;log.debug&quot;, // name
-			false, // default value
-			true, // mutable
-			&quot;This flag let you to enable or disable the debug &quot;
-					+ &quot;output of the program.&quot;,
-			&quot;/rtspproxy/log/debug&quot; // xpathExpr
-	);
-
-	public static final BooleanParameter logLogToFile = new BooleanParameter(
-			&quot;log.logtofile&quot;, // name
-			false, // default value
-			true, // mutable
-			&quot;If you want to save to a file the debug output	set this to Yes&quot;,
-			&quot;/rtspproxy/log/logToFile&quot; // xpathExpr
-	);
-
-	public static final StringParameter logFile = new StringParameter( &quot;log.file&quot;, // name
-			&quot;logs/rtspproxy.log&quot;, // default value
-			true, // mutable
-			&quot;Here you specify the file to log to.&quot;,
-			&quot;/rtspproxy/log/file&quot;  // xpathExpr
-	);
-
+	
 	public static final IntegerParameter threadPoolSize = new IntegerParameter(
 			&quot;thread.pool.size&quot;, // name
 			new Integer( 0 ), // min value
@@ -384,8 +361,6 @@
 		rtspproxyHome = System.getProperty( &quot;rtspproxy.home&quot; );
 		if ( rtspproxyHome == null ) {
 			rtspproxyHome = System.getProperty( &quot;user.dir&quot; );
-			if ( rtspproxyHome == null )
-				rtspproxyHome = &quot;&quot;;
 		}
 
 		// Read program name and version
@@ -411,10 +386,6 @@
 
 		startDate = new Date();
 
-		// Subscribe to parameter changes notification
-		logDebug.addObserver( this );
-		logFile.addObserver( this );
-		logLogToFile.addObserver( this );
 	}
 
 	/**
@@ -426,15 +397,10 @@
 	{
 		if ( !( o instanceof Parameter ) )
 			throw new IllegalArgumentException( &quot;Only observe parameters&quot; );
-
-		if ( o == logDebug || o == logFile || o == logLogToFile ) {
-			updateDebugSettings();
-			// log.debug( &quot;Updated logger settings.&quot; );
-		}
 	}
 
 	/**
-	 * @return the application base dir
+	 * @return the application base dir or null if the home directory cannot be determined.
 	 */
 	public static String getHome()
 	{
@@ -472,53 +438,6 @@
 
 	// /////////////////////////////////////////////////////////
 
-	protected static void updateDebugSettings()
-	{
-		Properties logProperties = new Properties();
-		// common properties
-		logProperties.setProperty( &quot;log4j.appender.A1.layout&quot;,
-				&quot;org.apache.log4j.PatternLayout&quot; );
-
-		if ( logDebug.getValue() ) {
-			/*
-			 * For debug messages we want to have a special layout
-			 */
-			logProperties.setProperty( &quot;log4j.appender.A1.layout.ConversionPattern&quot;,
-					&quot;%9r %5p [%t] %c - %m%n&quot; );
-			logProperties.setProperty( &quot;log4j.rootLogger&quot;, &quot;DEBUG, A1&quot; );
-
-		} else {
-			// only write important messages
-			logProperties.setProperty( &quot;log4j.appender.A1.layout.ConversionPattern&quot;,
-					&quot;%5p - %d - %m%n&quot; );
-			logProperties.setProperty( &quot;log4j.rootLogger&quot;, &quot;INFO, A1&quot; );
-		}
-
-		if ( logLogToFile.getValue() == true ) {
-			// save logs in a file
-			File file = new File( logFile.getValue() );
-			if ( !file.isAbsolute() ) {
-				file = new File( rtspproxyHome + File.separator + logFile.getValue() );
-			}
-
-			logProperties.setProperty( &quot;log4j.appender.A1&quot;,
-					&quot;org.apache.log4j.RollingFileAppender&quot; );
-			logProperties.setProperty( &quot;log4j.appender.A1.File&quot;, file.getAbsolutePath() );
-
-			// if logs directory does not exists, create it
-			File logs = file.getParentFile();
-			if ( !logs.exists() )
-				logs.mkdir();
-
-		} else {
-			// Log to console
-			logProperties.setProperty( &quot;log4j.appender.A1&quot;,
-					&quot;org.apache.log4j.ConsoleAppender&quot; );
-		}
-
-		PropertyConfigurator.configure( logProperties );
-	}
-
 	/**
 	 * @return a String containing all the parameters
 	 */

Deleted: trunk/RTSPProxy-Core/src/main/java/rtspproxy/config/ConfigReader.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/config/ConfigReader.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/config/ConfigReader.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -1,58 +0,0 @@
-package rtspproxy.config;
-
-import java.io.File;
-import java.io.FileInputStream;
-import java.io.FileNotFoundException;
-import java.io.IOException;
-import java.io.InputStream;
-import java.util.Properties;
-
-import org.apache.log4j.Logger;
-
-public class ConfigReader
-{
-	private static Logger log = Logger.getLogger( ConfigReader.class );
-
-	public ConfigReader( String fileName ) throws IllegalArgumentException
-	{
-		Properties properties = new Properties();
-		
-		File file = new File( fileName );
-
-		try {
-			InputStream is = new FileInputStream( file );
-			properties.load( is );
-		} catch ( FileNotFoundException e ) {
-			// silently ignore
-			return;
-		} catch ( IOException e ) {
-			log.error( &quot;Error reading configuration file: &quot; + e );
-			return;
-		}
-
-		// cycle throuh all the properties
-		for ( Object key : properties.keySet() ) {
-			String name = (String) key;
-			String value = properties.getProperty( name );
-
-			Parameter parameter = Config.getParameter( name );
-			if ( parameter == null ) {
-				// The property name is invalid
-				log.fatal( &quot;Invalid parameter name: &quot; + name );
-				throw new IllegalArgumentException();
-			}
-
-			try {
-				parameter.setValue( value );
-			} catch ( IllegalArgumentException e ) {
-				log.fatal( &quot;Invalid value for parameter &quot; + name + &quot;: &quot; + value );
-				throw e;
-			}
-		}
-
-		Config.updateDebugSettings();
-
-		log.debug( &quot;Reading configurations from '&quot; + file + &quot;'&quot; );
-
-	}
-}

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/config/XMLConfigReader.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/config/XMLConfigReader.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/config/XMLConfigReader.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -3,7 +3,8 @@
  */
 package rtspproxy.config;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 
 import java.io.FileInputStream;
 import java.io.IOException;
@@ -25,8 +26,7 @@
 public class XMLConfigReader {
 
 	// logger
-	private static final Logger logger = Logger
-			.getLogger(XMLConfigReader.class);
+	private static final Logger logger = LoggerFactory.getLogger(XMLConfigReader.class);
 	
 	/**
 	 * create the xml config read object

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/filter/accounting/AccountingFilter.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/filter/accounting/AccountingFilter.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/filter/accounting/AccountingFilter.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -1,6 +1,7 @@
 package rtspproxy.filter.accounting;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 import org.apache.mina.common.IoFilterAdapter;
 import org.apache.mina.common.IoSession;
 
@@ -15,7 +16,7 @@
 public class AccountingFilter extends IoFilterAdapter
 {
 
-	private static Logger log = Logger.getLogger( AccountingFilter.class );
+	private static Logger log = LoggerFactory.getLogger( AccountingFilter.class );
 
 	private AccountingProvider provider = null;
 
@@ -30,7 +31,7 @@
 			providerClass = Class.forName( className );
 
 		} catch ( ClassNotFoundException e ) {
-			log.fatal( &quot;Invalid AccountingProvider class: &quot; + className );
+			log.error( &quot;Invalid AccountingProvider class: &quot; + className );
 			Reactor.stop();
 			return;
 		}
@@ -45,7 +46,7 @@
 		}
 
 		if ( !found ) {
-			log.fatal( &quot;Class (&quot; + providerClass
+			log.error( &quot;Class (&quot; + providerClass
 					+ &quot;) does not implement the AccountingProvider interface.&quot; );
 			Reactor.stop();
 			return;
@@ -56,7 +57,7 @@
 			provider.init();
 
 		} catch ( Exception e ) {
-			log.fatal( &quot;Error starting AccountingProvider: &quot; + e );
+			log.error( &quot;Error starting AccountingProvider: &quot; + e );
 			Reactor.stop();
 			return;
 		}

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/filter/authentication/AuthenticationFilter.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/filter/authentication/AuthenticationFilter.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/filter/authentication/AuthenticationFilter.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -22,7 +22,8 @@
 import java.util.HashMap;
 import java.util.Map;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 import org.apache.mina.common.IoFilterAdapter;
 import org.apache.mina.common.IoSession;
 
@@ -43,7 +44,7 @@
 public class AuthenticationFilter extends IoFilterAdapter
 {
 
-	private static Logger log = Logger.getLogger( AuthenticationFilter.class );
+	private static Logger log = LoggerFactory.getLogger( AuthenticationFilter.class );
 
 	public static final String ATTR = AuthenticationFilter.class.getName() + &quot;Attr&quot;;
 
@@ -78,7 +79,7 @@
 			providerClass = Class.forName( className );
 
 		} catch ( ClassNotFoundException e ) {
-			log.fatal( &quot;Invalid AuthenticationProvider class: &quot; + className );
+			log.error( &quot;Invalid AuthenticationProvider class: &quot; + className );
 			Reactor.stop();
 			return;
 		}
@@ -93,7 +94,7 @@
 		}
 
 		if ( !found ) {
-			log.fatal( &quot;Class (&quot; + providerClass
+			log.error( &quot;Class (&quot; + providerClass
 					+ &quot;) does not implement the AuthenticationProvider interface.&quot; );
 			Reactor.stop();
 			return;
@@ -104,7 +105,7 @@
 			provider.init();
 
 		} catch ( Exception e ) {
-			log.fatal( &quot;Error starting AuthenticationProvider: &quot; + e );
+			log.error( &quot;Error starting AuthenticationProvider: &quot; + e );
 			Reactor.stop();
 			return;
 		}
@@ -114,7 +115,7 @@
 		Class schemeClass = schemeRegistry.get( schemeName.toLowerCase() );
 		if ( schemeClass == null ) {
 			// scheme not found
-			log.fatal( &quot;Authentication Scheme not found: &quot; + schemeName
+			log.error( &quot;Authentication Scheme not found: &quot; + schemeName
 					+ &quot;. Valid values are: &quot;
 					+ Arrays.toString( schemeRegistry.keySet().toArray() ) );
 			Reactor.stop();

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/filter/authentication/scheme/BasicAuthentication.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/filter/authentication/scheme/BasicAuthentication.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/filter/authentication/scheme/BasicAuthentication.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -18,7 +18,8 @@
 
 package rtspproxy.filter.authentication.scheme;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 
 import rtspproxy.RtspService;
 import rtspproxy.lib.Base64;
@@ -33,7 +34,7 @@
 public class BasicAuthentication implements AuthenticationScheme
 {
 
-	private static Logger log = Logger.getLogger( BasicAuthentication.class );
+	private static Logger log = LoggerFactory.getLogger( BasicAuthentication.class );
 
 	private String realm;
 

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/filter/authentication/scheme/DigestAuthentication.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/filter/authentication/scheme/DigestAuthentication.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/filter/authentication/scheme/DigestAuthentication.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -10,7 +10,8 @@
 import java.util.Map;
 import java.util.Random;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 
 import rtspproxy.RtspService;
 import rtspproxy.lib.number.UnsignedLong;
@@ -20,7 +21,7 @@
 public class DigestAuthentication implements AuthenticationScheme
 {
 
-	private static Logger log = Logger.getLogger( DigestAuthentication.class );
+	private static Logger log = LoggerFactory.getLogger( DigestAuthentication.class );
 
 	/** This is the value of the validity of a challenge response. */
 	private static final int NONCE_TIMEOUT = 60 * 5; // 5 minutes

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/filter/ipaddress/IpAddressFilter.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/filter/ipaddress/IpAddressFilter.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/filter/ipaddress/IpAddressFilter.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -20,7 +20,8 @@
 
 import java.net.InetSocketAddress;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 import org.apache.mina.common.IoFilterAdapter;
 import org.apache.mina.common.IoSession;
 
@@ -34,7 +35,7 @@
 public class IpAddressFilter extends IoFilterAdapter
 {
 
-	private static Logger log = Logger.getLogger( IpAddressFilter.class );
+	private static Logger log = LoggerFactory.getLogger( IpAddressFilter.class );
 
 	private IpAddressProvider provider;
 
@@ -49,7 +50,7 @@
 			providerClass = Class.forName( className );
 
 		} catch ( ClassNotFoundException e ) {
-			log.fatal( &quot;Invalid IpAddressProvider class: &quot; + className );
+			log.error( &quot;Invalid IpAddressProvider class: &quot; + className );
 			Reactor.stop();
 			return;
 		}
@@ -64,7 +65,7 @@
 		}
 
 		if ( !found ) {
-			log.fatal( &quot;Class (&quot; + provider
+			log.error( &quot;Class (&quot; + provider
 					+ &quot;) does not implement the IpAddressProvider interface.&quot; );
 			Reactor.stop();
 			return;
@@ -74,7 +75,7 @@
 			provider = (IpAddressProvider) providerClass.newInstance();
 			provider.init();
 		} catch ( Exception e ) {
-			log.fatal( &quot;Error starting IpAddressProvider: &quot; + e );
+			log.error( &quot;Error starting IpAddressProvider: &quot; + e );
 			Reactor.stop();
 			return;
 		}

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/filter/rewrite/RequestUrlRewritingImpl.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/filter/rewrite/RequestUrlRewritingImpl.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/filter/rewrite/RequestUrlRewritingImpl.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -6,7 +6,8 @@
 import java.net.MalformedURLException;
 import java.net.URL;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 
 import org.apache.mina.common.IoFilterAdapter;
 import org.apache.mina.common.IoSession;
@@ -25,8 +26,7 @@
 	/**
 	 * Logger for this class
 	 */
-	private static final Logger logger = Logger
-			.getLogger(RequestUrlRewritingImpl.class);
+	private static final Logger logger = LoggerFactory.getLogger(RequestUrlRewritingImpl.class);
 
 	// the filter instance
 	private RequestUrlRewritingFilter filter;
@@ -48,7 +48,7 @@
 			this.filter = (RequestUrlRewritingFilter) filterClazz.newInstance();
 			logger.info(&quot;using request URL rewriter &quot; + clazzName);
 		} catch (Exception e) {
-			logger.error(e);
+			logger.error(&quot;error instantiating filter&quot;, e);
 
 			throw e;
 		}

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/jmx/Authenticator.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/jmx/Authenticator.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/jmx/Authenticator.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -26,7 +26,8 @@
 import javax.management.remote.JMXPrincipal;
 import javax.security.auth.Subject;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 
 import rtspproxy.config.Config;
 
@@ -39,7 +40,7 @@
 public class Authenticator implements JMXAuthenticator
 {
 
-	private static Logger log = Logger.getLogger( Authenticator.class );
+	private static Logger log = LoggerFactory.getLogger( Authenticator.class );
 
 	public Subject authenticate( Object credentials ) throws SecurityException
 	{

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/jmx/JmxAgent.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/jmx/JmxAgent.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/jmx/JmxAgent.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -30,12 +30,12 @@
 import javax.management.remote.JMXServiceURL;
 
 import mx4j.log.Log;
-import mx4j.log.Log4JLogger;
 import mx4j.tools.adaptor.http.HttpAdaptor;
 import mx4j.tools.adaptor.http.XSLTProcessor;
 import mx4j.tools.naming.NamingService;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 
 import rtspproxy.ProxyService;
 import rtspproxy.RdtClientService;
@@ -56,7 +56,7 @@
 public class JmxAgent
 {
 
-	private static Logger log = Logger.getLogger( JmxAgent.class );
+	private static Logger log = LoggerFactory.getLogger( JmxAgent.class );
 
 	private static final String DOMAIN = &quot;RtspProxy&quot;;
 
@@ -72,7 +72,7 @@
 		System.setProperty( &quot;mx4j.log.priority&quot;, &quot;warn&quot; );
 
 		// Redirect mx4j messages to our own logger
-		Log.redirectTo( new Log4JLogger() );
+		Log.redirectTo( new Slf4JLogger() );
 
 		mbeanServer = MBeanServerFactory.createMBeanServer();
 
@@ -105,7 +105,7 @@
 			startConnectorServer();
 
 		} catch ( Exception e ) {
-			log.fatal( &quot;Exception: &quot;, e );
+			log.error( &quot;Exception: &quot;, e );
 			Reactor.stop();
 		}
 	}
@@ -179,4 +179,55 @@
 		log.info( &quot;Started JMX connector server. Service url: &quot; + uri );
 	}
 
+	/**
+	 * simple wrapper to log mx4j logging info into slf4j subsystem
+	 * @author Rainer Bieniek (<A HREF="https://lists.berlios.de/mailman/listinfo/rtspproxy-devel">Rainer.Bieniek at vodafone.com</A>)
+	 *
+	 */
+	public static class Slf4JLogger extends mx4j.log.Logger {
+
+		private Logger m_logger;
+		
+		/**
+		 * default no-op constructor
+		 */
+		public Slf4JLogger() {}
+		
+		/* (non-Javadoc)
+		 * @see mx4j.log.Logger#log(int, java.lang.Object, java.lang.Throwable)
+		 */
+		@Override
+		protected void log(int level, Object msg, Throwable t) {
+			switch(level) {
+			case mx4j.log.Logger.DEBUG:
+				this.m_logger.debug(msg.toString(), t);
+				break;
+			case mx4j.log.Logger.ERROR:
+				this.m_logger.error(msg.toString(), t);
+				break;
+			case mx4j.log.Logger.FATAL:
+				this.m_logger.error(msg.toString(), t);
+				break;
+			case mx4j.log.Logger.INFO:
+				this.m_logger.info(msg.toString(), t);
+				break;
+			case mx4j.log.Logger.TRACE:
+				this.m_logger.debug(msg.toString(), t);
+				break;
+			case mx4j.log.Logger.WARN:
+				this.m_logger.warn(msg.toString(), t);
+				break;
+			}
+		}
+
+		/* (non-Javadoc)
+		 * @see mx4j.log.Logger#setCategory(java.lang.String)
+		 */
+		@Override
+		protected void setCategory(String arg0) {
+			super.setCategory(arg0);
+			
+			this.m_logger = LoggerFactory.getLogger(arg0);
+		}		
+	}
 }

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/lib/Exceptions.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/lib/Exceptions.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/lib/Exceptions.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -18,7 +18,8 @@
 
 package rtspproxy.lib;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 
 /**
  * Provide logging for stack trace of exceptions.
@@ -28,7 +29,7 @@
 public class Exceptions
 {
 
-	private static Logger log = Logger.getRootLogger();
+	private static Logger log = LoggerFactory.getLogger(&quot;&quot;);
 
 	private final static String CRLF = &quot;\r\n&quot;;
 

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/lib/NetworkInterface.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/lib/NetworkInterface.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/lib/NetworkInterface.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -26,7 +26,8 @@
 import java.util.HashSet;
 import java.util.Set;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 
 /**
  * Utility used to get all the addresses of the network interfaces found on the
@@ -37,7 +38,7 @@
 public class NetworkInterface
 {
 
-	private static Logger log = Logger.getLogger( NetworkInterface.class );
+	private static Logger log = LoggerFactory.getLogger( NetworkInterface.class );
 
 	/**
 	 * Return all the addresses associated with the given interface. If the
@@ -58,7 +59,7 @@
 				addresses.addAll( getAddresses( networkInterface ) );
 
 			} catch ( Exception e ) {
-				log.fatal( &quot;Cannot register network interface: &quot; + interfaceAddress, e );
+				log.error( &quot;Cannot register network interface: &quot; + interfaceAddress, e );
 				return null;
 			}
 		} else {
@@ -68,7 +69,7 @@
 			try {
 				interfaces = java.net.NetworkInterface.getNetworkInterfaces();
 			} catch ( SocketException se ) {
-				log.fatal( &quot;Cannot get the interfaces list.&quot; );
+				log.error( &quot;Cannot get the interfaces list.&quot; );
 				return null;
 			}
 

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/lib/PortManager.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/lib/PortManager.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/lib/PortManager.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -24,7 +24,8 @@
 import java.util.HashSet;
 import java.util.Set;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 
 /**
  * The PortManager will keep a list of reserved ports
@@ -32,7 +33,7 @@
 public class PortManager
 {
 
-	private static Logger log = Logger.getLogger( PortManager.class );
+	private static Logger log = LoggerFactory.getLogger( PortManager.class );
 
 	protected static final int minUdpPort = 6790;
 	protected static final int maxUdpPort = 49151;

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ClientRdtPacketHandler.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ClientRdtPacketHandler.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ClientRdtPacketHandler.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -20,7 +20,8 @@
 
 import java.net.InetSocketAddress;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 import org.apache.mina.common.ByteBuffer;
 import org.apache.mina.common.IoHandlerAdapter;
 import org.apache.mina.common.IoSession;
@@ -38,7 +39,7 @@
 public class ClientRdtPacketHandler extends IoHandlerAdapter
 {
 
-	private static Logger log = Logger.getLogger( ClientRdtPacketHandler.class );
+	private static Logger log = LoggerFactory.getLogger( ClientRdtPacketHandler.class );
 
 	@Override
 	public void sessionCreated( IoSession session ) throws Exception

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ClientRtcpPacketHandler.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ClientRtcpPacketHandler.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ClientRtcpPacketHandler.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -20,7 +20,8 @@
 
 import java.net.InetSocketAddress;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 import org.apache.mina.common.ByteBuffer;
 import org.apache.mina.common.IoHandlerAdapter;
 import org.apache.mina.common.IoSession;
@@ -39,7 +40,7 @@
 public class ClientRtcpPacketHandler extends IoHandlerAdapter
 {
 
-	private static Logger log = Logger.getLogger( ClientRtcpPacketHandler.class );
+	private static Logger log = LoggerFactory.getLogger( ClientRtcpPacketHandler.class );
 
 	@Override
 	public void sessionCreated( IoSession session ) throws Exception

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ClientRtpPacketHandler.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ClientRtpPacketHandler.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ClientRtpPacketHandler.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -20,7 +20,8 @@
 
 import java.net.InetSocketAddress;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 import org.apache.mina.common.ByteBuffer;
 import org.apache.mina.common.IoHandlerAdapter;
 import org.apache.mina.common.IoSession;
@@ -40,7 +41,7 @@
 public class ClientRtpPacketHandler extends IoHandlerAdapter
 {
 
-	private static Logger log = Logger.getLogger( ClientRtpPacketHandler.class );
+	private static Logger log = LoggerFactory.getLogger( ClientRtpPacketHandler.class );
 
 	@Override
 	public void sessionCreated( IoSession session ) throws Exception

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ClientSide.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ClientSide.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ClientSide.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -18,7 +18,8 @@
 
 package rtspproxy.proxy;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 import org.apache.mina.common.IoHandlerAdapter;
 import org.apache.mina.common.IoSession;
 import org.apache.mina.filter.codec.ProtocolDecoderException;
@@ -35,7 +36,7 @@
 public class ClientSide extends IoHandlerAdapter
 {
 
-	private static Logger log = Logger.getLogger( ClientSide.class );
+	private static Logger log = LoggerFactory.getLogger( ClientSide.class );
 
 	@Override
 	public void sessionCreated( IoSession session ) throws Exception

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ProxyHandler.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ProxyHandler.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ProxyHandler.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -26,7 +26,8 @@
 import java.net.UnknownHostException;
 import java.nio.channels.UnresolvedAddressException;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 import org.apache.mina.common.ConnectFuture;
 import org.apache.mina.common.IoSession;
 import org.apache.mina.transport.socket.nio.SocketConnector;
@@ -55,7 +56,7 @@
 public class ProxyHandler
 {
 
-	private static Logger log = Logger.getLogger( ProxyHandler.class );
+	private static Logger log = LoggerFactory.getLogger( ProxyHandler.class );
 
 	/** Used to save a reference to this handler in the IoSession */
 	protected static final String ATTR = ProxyHandler.class.toString() + &quot;Attr&quot;;
@@ -109,7 +110,7 @@
 				connectServerSide( request.getUrl() );
 
 			} catch ( IOException e ) {
-				log.error( e );
+				log.error( &quot;I/O exception&quot;, e );
 				// closeAll();
 			} finally {
 				if ( serverSession == null )
@@ -494,7 +495,7 @@
 		try {
 			session.write( request );
 		} catch ( Exception e ) {
-			log.error( e.getCause() );
+			log.error( &quot;exception sending request&quot;, e.getCause() );
 		}
 	}
 
@@ -512,7 +513,7 @@
 		try {
 			session.write( response );
 		} catch ( Exception e ) {
-			log.error( e.getCause() );
+			log.error( &quot;exception sending response&quot;, e.getCause() );
 		}
 	}
 

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ProxySession.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ProxySession.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ProxySession.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -22,7 +22,8 @@
 import java.util.Random;
 import java.util.concurrent.ConcurrentHashMap;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 
 import rtspproxy.lib.number.UnsignedLong;
 import rtspproxy.proxy.track.RdtTrack;
@@ -37,7 +38,7 @@
 public class ProxySession
 {
 
-	private static Logger log = Logger.getLogger( ProxySession.class );
+	private static Logger log = LoggerFactory.getLogger( ProxySession.class );
 
 	protected static final String ATTR = ProxySession.class.toString() + &quot;Attr&quot;;
 

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ServerRdtPacketHandler.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ServerRdtPacketHandler.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ServerRdtPacketHandler.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -20,7 +20,8 @@
 
 import java.net.InetSocketAddress;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 import org.apache.mina.common.ByteBuffer;
 import org.apache.mina.common.IoHandlerAdapter;
 import org.apache.mina.common.IoSession;
@@ -38,7 +39,7 @@
 public class ServerRdtPacketHandler extends IoHandlerAdapter
 {
 
-	private static Logger log = Logger.getLogger( ServerRdtPacketHandler.class );
+	private static Logger log = LoggerFactory.getLogger( ServerRdtPacketHandler.class );
 
 	@Override
 	public void sessionCreated( IoSession session ) throws Exception

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ServerRtcpPacketHandler.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ServerRtcpPacketHandler.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ServerRtcpPacketHandler.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -20,7 +20,8 @@
 
 import java.net.InetSocketAddress;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 import org.apache.mina.common.ByteBuffer;
 import org.apache.mina.common.IoHandlerAdapter;
 import org.apache.mina.common.IoSession;
@@ -36,7 +37,7 @@
 public class ServerRtcpPacketHandler extends IoHandlerAdapter
 {
 
-	private static Logger log = Logger.getLogger( ServerRtcpPacketHandler.class );
+	private static Logger log = LoggerFactory.getLogger( ServerRtcpPacketHandler.class );
 
 	@Override
 	public void messageReceived( IoSession session, Object buffer ) throws Exception

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ServerRtpPacketHandler.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ServerRtpPacketHandler.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ServerRtpPacketHandler.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -20,7 +20,8 @@
 
 import java.net.InetSocketAddress;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 import org.apache.mina.common.ByteBuffer;
 import org.apache.mina.common.IoHandlerAdapter;
 import org.apache.mina.common.IoSession;
@@ -36,7 +37,7 @@
 public class ServerRtpPacketHandler extends IoHandlerAdapter
 {
 
-	private static Logger log = Logger.getLogger( ServerRtpPacketHandler.class );
+	private static Logger log = LoggerFactory.getLogger( ServerRtpPacketHandler.class );
 
 	/*
 	 * @see org.apache.mina.io.IoHandlerAdapter#dataRead(org.apache.mina.io.IoSession,

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ServerSide.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ServerSide.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/ServerSide.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -13,7 +13,8 @@
 
 package rtspproxy.proxy;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 import org.apache.mina.common.IoHandlerAdapter;
 import org.apache.mina.common.IoSession;
 
@@ -29,7 +30,7 @@
 public class ServerSide extends IoHandlerAdapter
 {
 
-	private static Logger log = Logger.getLogger( ServerSide.class );
+	private static Logger log = LoggerFactory.getLogger( ServerSide.class );
 
 	@Override
 	public void sessionCreated( IoSession session ) throws Exception
@@ -199,7 +200,7 @@
 
 		ProxyHandler proxyHandler = (ProxyHandler) ( session.getAttribute( ProxyHandler.ATTR ) );
 		if ( proxyHandler == null ) {
-			log.fatal( &quot;proxyHandler is null&quot; );
+			log.error( &quot;proxyHandler is null&quot; );
 			throw new NullPointerException( &quot;proxyHandler in session is null&quot; );
 		}
 

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/track/RdtTrack.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/track/RdtTrack.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/track/RdtTrack.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -3,7 +3,8 @@
 import java.net.InetAddress;
 import java.net.InetSocketAddress;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 import org.apache.mina.common.ByteBuffer;
 import org.apache.mina.common.IoSession;
 
@@ -13,7 +14,7 @@
 public class RdtTrack extends Track
 {
 
-	private static Logger log = Logger.getLogger( RdtTrack.class );
+	private static Logger log = LoggerFactory.getLogger( RdtTrack.class );
 
 	/**
 	 * Cached references to IoSession objects used to send packets to server and

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/track/RtpTrack.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/track/RtpTrack.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/proxy/track/RtpTrack.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -9,7 +9,8 @@
 import java.util.Set;
 import java.util.concurrent.ConcurrentHashMap;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 import org.apache.mina.common.IoSession;
 
 import rtspproxy.RtcpClientService;
@@ -23,7 +24,7 @@
 public class RtpTrack extends Track
 {
 
-	private static Logger log = Logger.getLogger( RtpTrack.class );
+	private static Logger log = LoggerFactory.getLogger( RtpTrack.class );
 
 	/** Maps a server SSRC id to a Track */
 	private static Map&lt;UnsignedInt, RtpTrack&gt; serverSsrcMap = new ConcurrentHashMap&lt;UnsignedInt, RtpTrack&gt;();

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/rtp/RtpPacket.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/rtp/RtpPacket.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/rtp/RtpPacket.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -18,7 +18,8 @@
 
 package rtspproxy.rtp;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 import org.apache.mina.common.ByteBuffer;
 
 import rtspproxy.lib.number.UnsignedByte;
@@ -55,7 +56,7 @@
  */
 public class RtpPacket implements Packet {
 
-	private static Logger log = Logger.getLogger(RtpPacket.class);
+	private static Logger log = LoggerFactory.getLogger(RtpPacket.class);
 
 	/**
 	 * This field identifies the version of RTP. The version defined by this

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/rtp/rtcp/SDESInfo.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/rtp/rtcp/SDESInfo.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/rtp/rtcp/SDESInfo.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -20,7 +20,8 @@
 
 import java.nio.ByteBuffer;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 
 /**
  * @author mat
@@ -28,7 +29,7 @@
  */
 public class SDESInfo implements RtcpInfo
 {
-	static Logger log = Logger.getLogger( SDESInfo.class );
+	static Logger log = LoggerFactory.getLogger( SDESInfo.class );
 	
 	public enum Type {
 		END(0), CNAME(1), NAME(2), EMAIL(3), PHONE(4), LOC(5), TOOL(6), NOTE(7), PRIV(8);

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/rtsp/RtspDecoder.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/rtsp/RtspDecoder.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/rtsp/RtspDecoder.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -21,7 +21,8 @@
 import java.util.regex.Matcher;
 import java.util.regex.Pattern;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 import org.apache.mina.common.ByteBuffer;
 import org.apache.mina.common.IoSession;
 import org.apache.mina.filter.codec.ProtocolDecoder;
@@ -64,7 +65,7 @@
 		Dispatch
 	}
 
-	private static Logger log = Logger.getLogger( RtspDecoder.class );
+	private static Logger log = LoggerFactory.getLogger( RtspDecoder.class );
 
 	private static final Pattern rtspRequestPattern = Pattern.compile( &quot;([A-Z_]+) ([^ ]+) RTSP/1.0&quot; );
 	private static final Pattern rtspResponsePattern = Pattern.compile( &quot;RTSP/1.0 ([0-9]+) .+&quot; );
@@ -147,7 +148,7 @@
 								try {
 									url = new URL( strUrl );
 								} catch ( MalformedURLException e ) {
-									log.info( e );
+									log.info( &quot;malformed URL: &quot; + url, e );
 									url = null;
 									session.setAttribute( readStateATTR, ReadState.Failed );
 									throw new ProtocolDecoderException( &quot;Invalid URL&quot; );

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/rtsp/RtspResponse.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/rtsp/RtspResponse.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/rtsp/RtspResponse.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -18,7 +18,8 @@
 
 package rtspproxy.rtsp;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 import org.apache.mina.common.ByteBuffer;
 
 /**
@@ -27,7 +28,7 @@
 public class RtspResponse extends RtspMessage
 {
 
-	private static Logger log = Logger.getLogger( RtspResponse.class );
+	private static Logger log = LoggerFactory.getLogger( RtspResponse.class );
 
 	RtspCode code;
 	RtspRequest.Verb requestVerb = RtspRequest.Verb.None;

Modified: trunk/RTSPProxy-Core/src/main/java/rtspproxy/rtsp/RtspSession.java
===================================================================
--- trunk/RTSPProxy-Core/src/main/java/rtspproxy/rtsp/RtspSession.java	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/main/java/rtspproxy/rtsp/RtspSession.java	2006-01-05 18:29:14 UTC (rev 374)
@@ -22,7 +22,8 @@
 import java.util.Random;
 import java.util.concurrent.ConcurrentHashMap;
 
-import org.apache.log4j.Logger;
+import org.slf4j.Logger;
+import org.slf4j.LoggerFactory;
 
 import rtspproxy.lib.number.UnsignedLong;
 
@@ -34,7 +35,7 @@
 public class RtspSession
 {
 
-	private static Logger log = Logger.getLogger( RtspSession.class );
+	private static Logger log = LoggerFactory.getLogger( RtspSession.class );
 
 	private static Map&lt;String, RtspSession&gt; sessions = new ConcurrentHashMap&lt;String, RtspSession&gt;();
 

Modified: trunk/RTSPProxy-Core/src/resources/conf/rtspproxy.conf.xml
===================================================================
--- trunk/RTSPProxy-Core/src/resources/conf/rtspproxy.conf.xml	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/resources/conf/rtspproxy.conf.xml	2006-01-05 18:29:14 UTC (rev 374)
@@ -1,9 +1,4 @@
 &lt;rtspproxy&gt;
-  &lt;log&gt;
-    &lt;debug&gt;false&lt;/debug&gt;
-    &lt;logToFile&gt;true&lt;/logToFile&gt;
-    &lt;file&gt;/tmp/rtspproxy.log&lt;/file&gt;
-  &lt;/log&gt;
   &lt;threadPoolSize&gt;10&lt;/threadPoolSize&gt;
   &lt;proxy&gt;
     &lt;rtspPort&gt;554&lt;/rtspPort&gt;

Added: trunk/RTSPProxy-Core/src/resources/conf/rtspproxy.log4j.xml
===================================================================
--- trunk/RTSPProxy-Core/src/resources/conf/rtspproxy.log4j.xml	2006-01-04 16:50:02 UTC (rev 373)
+++ trunk/RTSPProxy-Core/src/resources/conf/rtspproxy.log4j.xml	2006-01-05 18:29:14 UTC (rev 374)
@@ -0,0 +1,63 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
+&lt;!DOCTYPE log4j:configuration SYSTEM &quot;log4j.dtd&quot;&gt;
+
+&lt;!-- ===================================================================== --&gt;
+&lt;!--                                                                       --&gt;
+&lt;!--  Log4j Configuration                                                  --&gt;
+&lt;!--                                                                       --&gt;
+&lt;!-- ===================================================================== --&gt;
+
+&lt;!-- $Id$ --&gt;
+
+&lt;!--
+   | For more configuration infromation and examples see the Jakarta Log4j
+   | owebsite: <A HREF="http://jakarta.apache.org/log4j">http://jakarta.apache.org/log4j</A>
+ --&gt;
+
+&lt;log4j:configuration xmlns:log4j=&quot;<A HREF="http://jakarta.apache.org/log4j/">http://jakarta.apache.org/log4j/</A>&quot; debug=&quot;false&quot;&gt;
+
+   &lt;!-- ================================= --&gt;
+   &lt;!-- Preserve messages in a local file --&gt;
+   &lt;!-- ================================= --&gt;
+
+   &lt;!-- A time/date based rolling appender --&gt;
+   &lt;appender name=&quot;FILE&quot; class=&quot;org.apache.log4j.FileAppender&quot;&gt;
+      &lt;param name=&quot;File&quot; value=&quot;/tmp/rtspproxy.log&quot;/&gt;
+      &lt;param name=&quot;Append&quot; value=&quot;false&quot;/&gt;
+
+      &lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;
+         &lt;!-- The default pattern: Date Priority [Category] Message\n --&gt;
+         &lt;param name=&quot;ConversionPattern&quot; value=&quot;%9r %5p [%t] %c - %m%n&quot;/&gt;
+
+         &lt;!-- The full pattern: Date MS Priority [Category] (Thread:NDC) Message\n
+         &lt;param name=&quot;ConversionPattern&quot; value=&quot;%d %-5r %-5p [%c] (%t:%x) %m%n&quot;/&gt;
+          --&gt;
+      &lt;/layout&gt;
+   &lt;/appender&gt;
+
+   &lt;!-- ============================== --&gt;
+   &lt;!-- Append messages to the console --&gt;
+   &lt;!-- ============================== --&gt;
+
+   &lt;appender name=&quot;CONSOLE&quot; class=&quot;org.apache.log4j.ConsoleAppender&quot;&gt;
+      &lt;param name=&quot;Target&quot; value=&quot;System.out&quot;/&gt;
+      &lt;param name=&quot;Threshold&quot; value=&quot;INFO&quot;/&gt;
+
+      &lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;
+         &lt;!-- The default pattern: Date Priority [Category] Message\n --&gt;
+         &lt;param name=&quot;ConversionPattern&quot; value=&quot;%9r %5p [%t] %c - %m%n&quot;/&gt;
+      &lt;/layout&gt;
+   &lt;/appender&gt;
+
+
+   &lt;!-- ======================= --&gt;
+   &lt;!-- Setup the Root category --&gt;
+   &lt;!-- ======================= --&gt;
+
+   &lt;root&gt;
+      &lt;priority value=&quot;DEBUG&quot;/&gt;
+      &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;
+      &lt;appender-ref ref=&quot;FILE&quot;/&gt;
+   &lt;/root&gt;
+
+&lt;/log4j:configuration&gt;


Property changes on: trunk/RTSPProxy-Core/src/resources/conf/rtspproxy.log4j.xml
___________________________________________________________________
Name: svn:keywords
   + HeadURL Id LastChangedBy LastChangedDate LastChangedRevision


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000058.html">[Rtspproxy-devel] r373 - in trunk: . RTSPProxy-Core RTSPProxy-OSGi RTSPProxy-OSGi/src RTSPProxy-OSGi/src/changes RTSPProxy-OSGi/src/main RTSPProxy-OSGi/src/test src/changes
</A></li>
	<LI>Next message: <A HREF="000059.html">[Rtspproxy-devel] r375 - in trunk: . RTSPProxy-App RTSPProxy-App/src RTSPProxy-App/src/changes RTSPProxy-App/src/main RTSPProxy-App/src/main/java RTSPProxy-App/src/main/java/rtspproxy RTSPProxy-App/src/main/java/rtspproxy/filter RTSPProxy-App/src/main/java/rtspproxy/filter/accounting RTSPProxy-App/src/main/java/rtspproxy/filter/accounting/accounting RTSPProxy-App/src/main/java/rtspproxy/filter/authentication RTSPProxy-App/src/main/java/rtspproxy/filter/ipaddress RTSPProxy-App/src/main/java/rtspproxy/filter/ipaddress/ipaddress RTSPProxy-App/src/resources RTSPProxy-App/src/resources/conf RTSPProxy-App/src/test RTSPProxy-App/src/test/java RTSPProxy-App/src/test/java/rtspproxy RTSPProxy-App/src/test/java/rtspproxy/filter RTSPProxy-App/src/test/java/rtspproxy/filter/ipaddress RTSPProxy-Core RTSPProxy-Core/src/main/java/rtspproxy RTSPProxy-Core/src/main/java/rtspproxy/filter RTSPProxy-Core/src/main/java/rtspproxy/filter/authentication RTSPProxy-Core/src/resources RTSPProxy-Core/src/resourc! es/conf RTSPProxy-Core/src/test/java/rtspproxy/filter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60">[ date ]</a>
              <a href="thread.html#60">[ thread ]</a>
              <a href="subject.html#60">[ subject ]</a>
              <a href="author.html#60">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/rtspproxy-devel">More information about the Rtspproxy-devel
mailing list</a><br>
</body></html>
